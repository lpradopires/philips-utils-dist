"use strict";(self.webpackChunkphilips=self.webpackChunkphilips||[]).push([[132],{1132:(T,f,r)=>{r.r(f),r.d(f,{AzureModule:()=>R});var m=r(9808),n=r(2438),t=r(5861),h=r(3172),e=r(7587),u=r(4464),g=r(9019),l=r(520);let v=(()=>{class i{constructor(s){this.http=s,this.baseURL=g.N.url_server_base}startProcessRequest(){return(0,u.n)(this.http.post(this.baseURL+"azure-integration/start",{}))}creatOsProcessRequest(s){return(0,u.n)(this.http.post(this.baseURL+"azure-integration/create",{nr_ordem_service:s||0}))}getStatusProgress(){return(0,u.n)(this.http.get(this.baseURL+"azure-integration/status",{}))}getCardAzure(s){return(0,u.n)(this.http.get(this.baseURL+"azure-integration/cardazure/"+s))}}return i.\u0275fac=function(s){return new(s||i)(e.LFG(l.eN))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var d=r(5330),_=r(2382),o=r(4870),a=r(8185),c=r(845),b=r(7010),A=r(5315);const S=function(){return{height:"20px","margin-top":"10px"}},C=function(){return{width:"50vw"}},z=function(){return{"margin-left":"10px"}};let E=(()=>{class i{constructor(s,p){this.azureIntegrationService=s,this.dialogService=p,this.showBar="",this.progrres=0,this.progrresCreatCar="",this.ordem_servico=0,this.showAbort=!1,this.mensagemAbort=""}ngOnInit(){}startProcess(){this.azureIntegrationService.startProcessRequest().then(s=>{s&&s[0].value?(this.showAbort=!0,this.mensagemAbort=s[0].value):(this.progrres=0,this.getStatusBarProgress())})}createOSProcess(){this.ordem_servico?(this.progrresCreatCar="indeterminate",this.validaCarAzure().then(s=>{s&&s.length?(this.showAbort=!0,this.mensagemAbort="Esse card j\xe1 existe no Azure",this.progrresCreatCar=""):this.initProcessCreateCard()})):(this.showAbort=!0,this.mensagemAbort="O numero Ordem servico n\xe3o pode ser vazio")}initProcessCreateCard(){this.azureIntegrationService.creatOsProcessRequest(this.ordem_servico||0).then(s=>{s[0].value&&(this.showAbort=!0,this.mensagemAbort=s[0].value,this.progrresCreatCar="")})}validaCarAzure(){return this.azureIntegrationService.getCardAzure(this.ordem_servico)}getStatusBarProgress(){var s=this,p=setInterval((0,t.Z)(function*(){s.progrres=yield s.azureIntegrationService.getStatusProgress(),s.progrres<0&&(clearInterval(p),s.progrres=100)}),1e3)}show(){this.ref=this.dialogService.open(h.f,{header:"Choose a Product",width:"90%",contentStyle:{overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(s=>{})}ngOnDestroy(){this.ref&&this.ref.close()}}return i.\u0275fac=function(s){return new(s||i)(e.Y36(v),e.Y36(d.xA))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-azure-integration"]],decls:25,vars:24,consts:[["type","button","pButton","","icon","pi pi-info-circle","label","Configura\xe7\xf5es",3,"click"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","type","button","label","Iniciar",1,"p-button-rounded",3,"click"],[3,"value"],["header","Inconsist\xeancia",3,"visible","modal","draggable","resizable","visibleChange"],["inputId","os",3,"ngModel","useGrouping","ngModelChange"],["for","os"],[3,"mode"]],template:function(s,p){1&s&&(e.TgZ(0,"button",0),e.NdJ("click",function(){return p.show()}),e.qZA(),e._UZ(1,"h4")(2,"ngx-loading-bar"),e.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"h4"),e._uU(7,"Inicia a atualiza\xe7\xe3o e cria\xe7\xe3o de cards no Azure"),e.qZA(),e.TgZ(8,"h6"),e._uU(9," Quando card j\xe1 existir no azure, o processo vai apenas atualizar o hist\xf3rico e anexos. "),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return p.startProcess()}),e.qZA(),e._UZ(11,"p-progressBar",5),e.qZA()(),e.TgZ(12,"p-dialog",6),e.NdJ("visibleChange",function(P){return p.showAbort=P}),e._uU(13),e.qZA(),e.TgZ(14,"div",2)(15,"div",3)(16,"h4"),e._uU(17,"Inicia a cria\xe7\xe3o de um card pelo numero da ordem de servi\xe7o"),e.qZA(),e.TgZ(18,"h6"),e._uU(19," Quando card j\xe1 existir no azure, o processo vai apenas atualizar o hist\xf3rico e anexos. "),e.qZA(),e.TgZ(20,"button",4),e.NdJ("click",function(){return p.createOSProcess()}),e.qZA(),e.TgZ(21,"p-inputNumber",7),e.NdJ("ngModelChange",function(P){return p.ordem_servico=P}),e.qZA(),e.TgZ(22,"label",8),e._uU(23,"Numero Ordem Servico"),e.qZA(),e._UZ(24,"p-progressBar",9),e.qZA()()()),2&s&&(e.xp6(11),e.Akn(e.DdM(19,S)),e.Q6J("value",p.progrres),e.xp6(1),e.Akn(e.DdM(20,C)),e.Q6J("visible",p.showAbort)("modal",!0)("draggable",!1)("resizable",!1),e.xp6(1),e.hij(" ",p.mensagemAbort," "),e.xp6(8),e.Akn(e.DdM(21,z)),e.Q6J("ngModel",p.ordem_servico)("useGrouping",!1),e.xp6(1),e.Akn(e.DdM(22,z)),e.xp6(2),e.Akn(e.DdM(23,S)),e.s9C("mode",p.progrresCreatCar))},dependencies:[_.JJ,_.On,o.Nv,a.k,c.Hq,b.Rn,A.V]}),i})(),I=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[n.Bz.forChild([{path:"",component:E}]),n.Bz]}),i})();var M=r(386),O=r(1470);let R=(()=>{class i{}return i.\u0275fac=function(s){return new(s||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[v,d.xA],imports:[m.ez,I,l.JF,_.u5,M.e,o.sS,a.q,c.hJ,b.L$,A.S,_.UX,O.yI.forRoot()]}),i})()},3172:(T,f,r)=>{r.d(f,{f:()=>v});var m=r(5861),n=r(2382),t=r(7587),h=r(635),e=r(4870),u=r(845),g=r(1424),l=r(242);let v=(()=>{class d{constructor(o,a,c){this.formBuilder=o,this.settingsService=a,this.loadingBar=c}ngOnInit(){this.initFormGroup(),this.getSettings()}getSettings(){var o=this;return(0,m.Z)(function*(){o.loadingBar.useRef().start();const a=yield o.settingsService.getSettings();a&&(o.loadForm(a),o.loadingBar.useRef().stop())})()}loadForm(o){var a,c,b,A,S,C,z,E,I;null===(a=this.formSettings.get("url_azure"))||void 0===a||a.setValue(o.url_azure),null===(c=this.formSettings.get("azure_pass"))||void 0===c||c.setValue(o.azure_pass),null===(b=this.formSettings.get("url_base_corp"))||void 0===b||b.setValue(o.url_base_corp),null===(A=this.formSettings.get("base_corp_pass"))||void 0===A||A.setValue(o.base_corp_pass),null===(S=this.formSettings.get("url_base_dev"))||void 0===S||S.setValue(o.url_base_dev),null===(C=this.formSettings.get("base_dev_pass"))||void 0===C||C.setValue(o.base_dev_pass),null===(z=this.formSettings.get("ie_update_card_auto"))||void 0===z||z.setValue(o.ie_update_card_auto),null===(E=this.formSettings.get("ie_create_card_auto"))||void 0===E||E.setValue(o.ie_create_card_auto),null===(I=this.formSettings.get("id"))||void 0===I||I.setValue(o.id)}initFormGroup(){this.formSettings=this.formBuilder.group({url_azure:["",[n.kI.required]],azure_pass:["",[n.kI.required]],url_base_corp:["",[n.kI.required]],base_corp_pass:["",[n.kI.required]],url_base_dev:["",[n.kI.required]],base_dev_pass:["",[n.kI.required]],ie_update_card_auto:["",[n.kI.required]],ie_create_card_auto:["",[n.kI.required]],id:["",[n.kI.required]]})}creatSettings(){var o,a,c,b,A,S,C,z;return{url_azure:null===(o=this.formSettings.get("url_azure"))||void 0===o?void 0:o.value,azure_pass:null===(a=this.formSettings.get("azure_pass"))||void 0===a?void 0:a.value,url_base_corp:null===(c=this.formSettings.get("url_base_corp"))||void 0===c?void 0:c.value,base_corp_pass:null===(b=this.formSettings.get("base_corp_pass"))||void 0===b?void 0:b.value,url_base_dev:null===(A=this.formSettings.get("url_base_dev"))||void 0===A?void 0:A.value,base_dev_pass:null===(S=this.formSettings.get("base_dev_pass"))||void 0===S?void 0:S.value,ie_update_card_auto:null===(C=this.formSettings.get("ie_update_card_auto"))||void 0===C?void 0:C.value,ie_create_card_auto:null===(z=this.formSettings.get("ie_create_card_auto"))||void 0===z?void 0:z.value}}saveSettings(){var o;if(null!==(o=this.formSettings.get("id"))&&void 0!==o&&o.value){let a=this.creatSettings();this.settingsService.updateSettins(a)}else this.settingsService.saveSettings(this.creatSettings())}deleteSettings(){}}return d.\u0275fac=function(o){return new(o||d)(t.Y36(n.qu),t.Y36(h.g),t.Y36(e.dL))},d.\u0275cmp=t.Xpm({type:d,selectors:[["app-settings"]],decls:54,vars:1,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[3,"formGroup"],[1,"p-formgrid","grid"],[1,"field","col"],["htmlFor","url_azure"],["pInputText","","id","url_azure","type","text","formControlName","url_azure"],["htmlFor","azure_pass"],["pInputText","","id","azure_pass","type","text","formControlName","azure_pass"],["htmlFor","url_base_corp"],["pInputText","","id","url_base_corp","type","text","formControlName","url_base_corp"],["htmlFor","base_corp_pass"],["pInputText","","id","base_corp_pass","type","text","formControlName","base_corp_pass"],["htmlFor","url_base_dev"],["pInputText","","id","url_base_dev","type","text","formControlName","url_base_dev"],["htmlFor","base_dev_pass"],["pInputText","","id","base_dev_pass","type","text","formControlName","base_dev_pass"],[1,"field","col-1"],["id","ie_update_card_auto","formControlName","ie_update_card_auto"],[1,"field","col-5"],["htmlFor","ie_update_card_auto"],["id","ie_create_card_auto","formControlName","ie_create_card_auto"],["htmlFor","ie_create_card_auto"],["pButton","","pRipple","","type","button","label","Salvar",1,"p-button-success","p-button-text","mr-2","mb-2",3,"click"],["pButton","","pRipple","","type","button","label","Delete",1,"p-button-danger","p-button-text","mr-2","mb-2",3,"click"]],template:function(o,a){1&o&&(t._UZ(0,"ngx-loading-bar"),t.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h5"),t._uU(5,"Configura\xe7\xf5es"),t.qZA(),t.TgZ(6,"form",3)(7,"div",4)(8,"div",5)(9,"label",6),t._uU(10,"Url Azure"),t.qZA(),t._UZ(11,"input",7),t.qZA(),t.TgZ(12,"div",5)(13,"label",8),t._uU(14,"Senha Azure"),t.qZA(),t._UZ(15,"input",9),t.qZA()(),t.TgZ(16,"div",4)(17,"div",5)(18,"label",10),t._uU(19,"Url Base CORP"),t.qZA(),t._UZ(20,"input",11),t.qZA(),t.TgZ(21,"div",5)(22,"label",12),t._uU(23,"Senha Base CORP"),t.qZA(),t._UZ(24,"input",13),t.qZA()(),t.TgZ(25,"div",4)(26,"div",5)(27,"label",14),t._uU(28,"Url Base DEV"),t.qZA(),t._UZ(29,"input",15),t.qZA(),t.TgZ(30,"div",5)(31,"label",16),t._uU(32,"Senha Base DEV"),t.qZA(),t._UZ(33,"input",17),t.qZA()(),t.TgZ(34,"div",4)(35,"div",18),t._UZ(36,"p-inputSwitch",19),t.qZA(),t.TgZ(37,"div",20)(38,"label",21),t._uU(39,"Habilitar atualiza\xe7\xe3o automatica cards"),t.qZA()()(),t.TgZ(40,"div",4)(41,"div",18),t._UZ(42,"p-inputSwitch",22),t.qZA(),t.TgZ(43,"div",20)(44,"label",23),t._uU(45,"Habilitar cria\xe7\xe3o automatica cards"),t.qZA()()(),t.TgZ(46,"div",4),t._UZ(47,"div",5)(48,"div",5)(49,"div",5),t.TgZ(50,"div",5)(51,"button",24),t.NdJ("click",function(){return a.saveSettings()}),t.qZA()(),t.TgZ(52,"div",5)(53,"button",25),t.NdJ("click",function(){return a.deleteSettings()}),t.qZA()()()()()()()),2&o&&(t.xp6(6),t.Q6J("formGroup",a.formSettings))},dependencies:[n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u,u.Hq,g.o,l.Ql,e.Nv]}),d})()},635:(T,f,r)=>{r.d(f,{g:()=>e});var m=r(3905),n=r(9019),t=r(7587),h=r(520);let e=(()=>{class u{constructor(l){this.http=l,this.baseURL=n.N.url_server_base}saveSettings(l){return(0,m.z)(this.http.post(this.baseURL+"settings/create",l))}updateSettins(l){return(0,m.z)(this.http.put(this.baseURL+"settings/1/update",l))}getSettings(){return(0,m.z)(this.http.get(this.baseURL+"settings"))}}return u.\u0275fac=function(l){return new(l||u)(t.LFG(h.eN))},u.\u0275prov=t.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"}),u})()},3905:(T,f,r)=>{r.d(f,{z:()=>t});var m=r(6805),n=r(930);function t(h,e){const u="object"==typeof e;return new Promise((g,l)=>{const v=new n.Hp({next:d=>{g(d),v.unsubscribe()},error:l,complete:()=>{u?g(e.defaultValue):l(new m.K)}});h.subscribe(v)})}},5861:(T,f,r)=>{function m(t,h,e,u,g,l,v){try{var d=t[l](v),_=d.value}catch(o){return void e(o)}d.done?h(_):Promise.resolve(_).then(u,g)}function n(t){return function(){var h=this,e=arguments;return new Promise(function(u,g){var l=t.apply(h,e);function v(_){m(l,u,g,v,d,"next",_)}function d(_){m(l,u,g,v,d,"throw",_)}v(void 0)})}}r.d(f,{Z:()=>n})}}]);