"use strict";(self.webpackChunkphilips=self.webpackChunkphilips||[]).push([[132],{1132:(R,I,r)=>{r.r(I),r.d(I,{AzureModule:()=>P});var c=r(60),s=r(2438),e=r(5861),T=r(3172),t=r(7587),l=r(9808),E=r(9019),u=r(520);let f=(()=>{class a{constructor(o){this.http=o,this.baseURL=E.N.url_server_base}startProcessRequest(){return(0,l.n)(this.http.post(this.baseURL+"azure-integration/start",{}))}creatOsProcessRequest(o){return(0,l.n)(this.http.post(this.baseURL+"azure-integration/create",{nr_ordem_service:o||0}))}getStatusProgress(){return(0,l.n)(this.http.get(this.baseURL+"azure-integration/status",{}))}getCardAzure(o){return(0,l.n)(this.http.get(this.baseURL+"azure-integration/cardazure/"+o))}}return a.\u0275fac=function(o){return new(o||a)(t.LFG(u.eN))},a.\u0275prov=t.Yz7({token:a,factory:a.\u0275fac,providedIn:"root"}),a})();var _=r(5330),b=r(2382),i=r(3569),n=r(8185),d=r(845),g=r(7010),v=r(5315);const h=function(){return{height:"20px","margin-top":"10px"}},A=function(){return{width:"50vw"}},m=function(){return{"margin-left":"10px"}};let S=(()=>{class a{constructor(o,p){this.azureIntegrationService=o,this.dialogService=p,this.showBar="",this.progrres=0,this.progrresCreatCar="",this.ordem_servico=0,this.showAbort=!1,this.mensagemAbort=""}ngOnInit(){}startProcess(){this.azureIntegrationService.startProcessRequest().then(o=>{o&&o[0].value?(this.showAbort=!0,this.mensagemAbort=o[0].value):(this.progrres=0,this.getStatusBarProgress())})}createOSProcess(){this.ordem_servico?(this.progrresCreatCar="indeterminate",this.validaCarAzure().then(o=>{o&&o.length?(this.showAbort=!0,this.mensagemAbort="Esse card j\xe1 existe no Azure",this.progrresCreatCar=""):this.initProcessCreateCard()})):(this.showAbort=!0,this.mensagemAbort="O numero Ordem servico n\xe3o pode ser vazio")}initProcessCreateCard(){this.azureIntegrationService.creatOsProcessRequest(this.ordem_servico||0).then(o=>{o[0].value&&(this.showAbort=!0,this.mensagemAbort=o[0].value,this.progrresCreatCar="")})}validaCarAzure(){return this.azureIntegrationService.getCardAzure(this.ordem_servico)}getStatusBarProgress(){var o=this,p=setInterval((0,e.Z)(function*(){o.progrres=yield o.azureIntegrationService.getStatusProgress(),o.progrres<0&&(clearInterval(p),o.progrres=100)}),1e3)}show(){this.ref=this.dialogService.open(T.f,{header:"Choose a Product",width:"90%",contentStyle:{overflow:"auto"},baseZIndex:1e4}),this.ref.onClose.subscribe(o=>{})}ngOnDestroy(){this.ref&&this.ref.close()}}return a.\u0275fac=function(o){return new(o||a)(t.Y36(f),t.Y36(_.xA))},a.\u0275cmp=t.Xpm({type:a,selectors:[["app-azure-integration"]],decls:25,vars:24,consts:[["type","button","pButton","","icon","pi pi-info-circle","label","Configura\xe7\xf5es",3,"click"],[1,"grid"],[1,"col-12"],[1,"card"],["pButton","","pRipple","","type","button","label","Iniciar",1,"p-button-rounded",3,"click"],[3,"value"],["header","Inconsist\xeancia",3,"visible","modal","draggable","resizable","visibleChange"],["inputId","os",3,"ngModel","useGrouping","ngModelChange"],["for","os"],[3,"mode"]],template:function(o,p){1&o&&(t.TgZ(0,"button",0),t.NdJ("click",function(){return p.show()}),t.qZA(),t._UZ(1,"h4")(2,"ngx-loading-bar"),t.TgZ(3,"div",1)(4,"div",2)(5,"div",3)(6,"h4"),t._uU(7,"Inicia a atualiza\xe7\xe3o e cria\xe7\xe3o de cards no Azure"),t.qZA(),t.TgZ(8,"h6"),t._uU(9," Quando card j\xe1 existir no azure, o processo vai apenas atualizar o hist\xf3rico e anexos. "),t.qZA(),t.TgZ(10,"button",4),t.NdJ("click",function(){return p.startProcess()}),t.qZA(),t._UZ(11,"p-progressBar",5),t.qZA()(),t.TgZ(12,"p-dialog",6),t.NdJ("visibleChange",function(O){return p.showAbort=O}),t._uU(13),t.qZA(),t.TgZ(14,"div",2)(15,"div",3)(16,"h4"),t._uU(17,"Inicia a cria\xe7\xe3o de um card pelo numero da ordem de servi\xe7o"),t.qZA(),t.TgZ(18,"h6"),t._uU(19," Quando card j\xe1 existir no azure, o processo vai apenas atualizar o hist\xf3rico e anexos. "),t.qZA(),t.TgZ(20,"button",4),t.NdJ("click",function(){return p.createOSProcess()}),t.qZA(),t.TgZ(21,"p-inputNumber",7),t.NdJ("ngModelChange",function(O){return p.ordem_servico=O}),t.qZA(),t.TgZ(22,"label",8),t._uU(23,"Numero Ordem Servico"),t.qZA(),t._UZ(24,"p-progressBar",9),t.qZA()()()),2&o&&(t.xp6(11),t.Akn(t.DdM(19,h)),t.Q6J("value",p.progrres),t.xp6(1),t.Akn(t.DdM(20,A)),t.Q6J("visible",p.showAbort)("modal",!0)("draggable",!1)("resizable",!1),t.xp6(1),t.hij(" ",p.mensagemAbort," "),t.xp6(8),t.Akn(t.DdM(21,m)),t.Q6J("ngModel",p.ordem_servico)("useGrouping",!1),t.xp6(1),t.Akn(t.DdM(22,m)),t.xp6(2),t.Akn(t.DdM(23,h)),t.s9C("mode",p.progrresCreatCar))},dependencies:[b.JJ,b.On,i.Nv,n.k,d.Hq,g.Rn,v.V]}),a})(),Z=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({imports:[s.Bz.forChild([{path:"",component:S}]),s.Bz]}),a})();var C=r(386),z=r(1470);let P=(()=>{class a{}return a.\u0275fac=function(o){return new(o||a)},a.\u0275mod=t.oAB({type:a}),a.\u0275inj=t.cJS({providers:[f,_.xA],imports:[c.ez,Z,u.JF,b.u5,C.e,i.sS,n.q,d.hJ,g.L$,v.S,b.UX,z.yI.forRoot()]}),a})()},3172:(R,I,r)=>{r.d(I,{f:()=>f});var c=r(5861),s=r(2382),e=r(7587),T=r(635),t=r(3569),l=r(845),E=r(1424),u=r(242);let f=(()=>{class _{constructor(i,n,d){this.formBuilder=i,this.settingsService=n,this.loadingBar=d}ngOnInit(){this.initFormGroup(),this.getSettings()}getSettings(){var i=this;return(0,c.Z)(function*(){i.loadingBar.useRef().start();const n=yield i.settingsService.getSettings();n&&(i.loadForm(n),i.loadingBar.useRef().stop())})()}loadForm(i){var n,d,g,v,h,A,m,S,Z,C,z,P,a;null===(n=this.formSettings.get("url_azure"))||void 0===n||n.setValue(i.url_azure),null===(d=this.formSettings.get("azure_pass"))||void 0===d||d.setValue(i.azure_pass),null===(g=this.formSettings.get("url_base_corp"))||void 0===g||g.setValue(i.url_base_corp),null===(v=this.formSettings.get("base_corp_pass"))||void 0===v||v.setValue(i.base_corp_pass),null===(h=this.formSettings.get("url_base_dev"))||void 0===h||h.setValue(i.url_base_dev),null===(A=this.formSettings.get("base_dev_pass"))||void 0===A||A.setValue(i.base_dev_pass),null===(m=this.formSettings.get("ie_update_card_auto"))||void 0===m||m.setValue(i.ie_update_card_auto),null===(S=this.formSettings.get("ie_create_card_auto"))||void 0===S||S.setValue(i.ie_create_card_auto),null===(Z=this.formSettings.get("path_frontend"))||void 0===Z||Z.setValue(i.path_frontend),null===(C=this.formSettings.get("path_backend"))||void 0===C||C.setValue(i.path_backend),null===(z=this.formSettings.get("path_plsql"))||void 0===z||z.setValue(i.path_plsql),null===(P=this.formSettings.get("path_medicaldevice"))||void 0===P||P.setValue(i.path_medicaldevice),null===(a=this.formSettings.get("id"))||void 0===a||a.setValue(i.id)}initFormGroup(){this.formSettings=this.formBuilder.group({url_azure:["",[s.kI.required]],azure_pass:["",[s.kI.required]],url_base_corp:["",[s.kI.required]],base_corp_pass:["",[s.kI.required]],url_base_dev:["",[s.kI.required]],base_dev_pass:["",[s.kI.required]],ie_update_card_auto:["",[s.kI.required]],ie_create_card_auto:["",[s.kI.required]],path_frontend:["",[s.kI.required]],path_backend:["",[s.kI.required]],path_plsql:["",[s.kI.required]],path_medicaldevice:["",[s.kI.required]],id:["",[s.kI.required]]})}creatSettings(){var i,n,d,g,v,h,A,m,S,Z,C,z;return{url_azure:null===(i=this.formSettings.get("url_azure"))||void 0===i?void 0:i.value,azure_pass:null===(n=this.formSettings.get("azure_pass"))||void 0===n?void 0:n.value,url_base_corp:null===(d=this.formSettings.get("url_base_corp"))||void 0===d?void 0:d.value,base_corp_pass:null===(g=this.formSettings.get("base_corp_pass"))||void 0===g?void 0:g.value,url_base_dev:null===(v=this.formSettings.get("url_base_dev"))||void 0===v?void 0:v.value,base_dev_pass:null===(h=this.formSettings.get("base_dev_pass"))||void 0===h?void 0:h.value,ie_update_card_auto:null===(A=this.formSettings.get("ie_update_card_auto"))||void 0===A?void 0:A.value,ie_create_card_auto:null===(m=this.formSettings.get("ie_create_card_auto"))||void 0===m?void 0:m.value,path_frontend:null===(S=this.formSettings.get("path_frontend"))||void 0===S?void 0:S.value,path_backend:null===(Z=this.formSettings.get("path_backend"))||void 0===Z?void 0:Z.value,path_plsql:null===(C=this.formSettings.get("path_plsql"))||void 0===C?void 0:C.value,path_medicaldevice:null===(z=this.formSettings.get("path_medicaldevice"))||void 0===z?void 0:z.value}}saveSettings(){var i;if(null!==(i=this.formSettings.get("id"))&&void 0!==i&&i.value){let n=this.creatSettings();this.settingsService.updateSettins(n)}else this.settingsService.saveSettings(this.creatSettings())}deleteSettings(){}}return _.\u0275fac=function(i){return new(i||_)(e.Y36(s.qu),e.Y36(T.g),e.Y36(t.dL))},_.\u0275cmp=e.Xpm({type:_,selectors:[["app-settings"]],decls:72,vars:1,consts:[[1,"grid"],[1,"col-12","md:col-6"],[1,"card","p-fluid"],[3,"formGroup"],[1,"p-formgrid","grid"],[1,"field","col"],["htmlFor","url_azure"],["pInputText","","id","url_azure","type","text","formControlName","url_azure"],["htmlFor","azure_pass"],["pInputText","","id","azure_pass","type","text","formControlName","azure_pass"],["htmlFor","url_base_corp"],["pInputText","","id","url_base_corp","type","text","formControlName","url_base_corp"],["htmlFor","base_corp_pass"],["pInputText","","id","base_corp_pass","type","text","formControlName","base_corp_pass"],["htmlFor","url_base_dev"],["pInputText","","id","url_base_dev","type","text","formControlName","url_base_dev"],["htmlFor","base_dev_pass"],["pInputText","","id","base_dev_pass","type","text","formControlName","base_dev_pass"],["htmlFor","path_frontend"],["pInputText","","id","path_frontend","type","text","formControlName","path_frontend"],["htmlFor","path_backend"],["pInputText","","id","path_backend","type","text","formControlName","path_backend"],["htmlFor","path_plsql"],["pInputText","","id","path_plsql","type","text","formControlName","path_plsql"],["htmlFor","path_medicaldevice"],["pInputText","","id","path_medicaldevice","type","text","formControlName","path_medicaldevice"],[1,"field","col-1"],["id","ie_update_card_auto","formControlName","ie_update_card_auto"],[1,"field","col-5"],["htmlFor","ie_update_card_auto"],["id","ie_create_card_auto","formControlName","ie_create_card_auto"],["htmlFor","ie_create_card_auto"],["pButton","","pRipple","","type","button","label","Salvar",1,"p-button-success","p-button-text","mr-2","mb-2",3,"click"],["pButton","","pRipple","","type","button","label","Delete",1,"p-button-danger","p-button-text","mr-2","mb-2",3,"click"]],template:function(i,n){1&i&&(e._UZ(0,"ngx-loading-bar"),e.TgZ(1,"div",0)(2,"div",1)(3,"div",2)(4,"h5"),e._uU(5,"Configura\xe7\xf5es"),e.qZA(),e.TgZ(6,"form",3)(7,"div",4)(8,"div",5)(9,"label",6),e._uU(10,"Url Azure"),e.qZA(),e._UZ(11,"input",7),e.qZA(),e.TgZ(12,"div",5)(13,"label",8),e._uU(14,"Senha Azure"),e.qZA(),e._UZ(15,"input",9),e.qZA()(),e.TgZ(16,"div",4)(17,"div",5)(18,"label",10),e._uU(19,"Url Base CORP"),e.qZA(),e._UZ(20,"input",11),e.qZA(),e.TgZ(21,"div",5)(22,"label",12),e._uU(23,"Senha Base CORP"),e.qZA(),e._UZ(24,"input",13),e.qZA()(),e.TgZ(25,"div",4)(26,"div",5)(27,"label",14),e._uU(28,"Url Base DEV"),e.qZA(),e._UZ(29,"input",15),e.qZA(),e.TgZ(30,"div",5)(31,"label",16),e._uU(32,"Senha Base DEV"),e.qZA(),e._UZ(33,"input",17),e.qZA()(),e.TgZ(34,"div",4)(35,"div",5)(36,"label",18),e._uU(37,"Reposit\xf3rio Frontend"),e.qZA(),e._UZ(38,"input",19),e.qZA(),e.TgZ(39,"div",5)(40,"label",20),e._uU(41,"Reposit\xf3rio Backend"),e.qZA(),e._UZ(42,"input",21),e.qZA()(),e.TgZ(43,"div",4)(44,"div",5)(45,"label",22),e._uU(46,"Reposit\xf3rio PlSql"),e.qZA(),e._UZ(47,"input",23),e.qZA(),e.TgZ(48,"div",5)(49,"label",24),e._uU(50,"Reposit\xf3rio MedicalDevice"),e.qZA(),e._UZ(51,"input",25),e.qZA()(),e.TgZ(52,"div",4)(53,"div",26),e._UZ(54,"p-inputSwitch",27),e.qZA(),e.TgZ(55,"div",28)(56,"label",29),e._uU(57,"Habilitar atualiza\xe7\xe3o automatica cards"),e.qZA()()(),e.TgZ(58,"div",4)(59,"div",26),e._UZ(60,"p-inputSwitch",30),e.qZA(),e.TgZ(61,"div",28)(62,"label",31),e._uU(63,"Habilitar cria\xe7\xe3o automatica cards"),e.qZA()()(),e.TgZ(64,"div",4),e._UZ(65,"div",5)(66,"div",5)(67,"div",5),e.TgZ(68,"div",5)(69,"button",32),e.NdJ("click",function(){return n.saveSettings()}),e.qZA()(),e.TgZ(70,"div",5)(71,"button",33),e.NdJ("click",function(){return n.deleteSettings()}),e.qZA()()()()()()()),2&i&&(e.xp6(6),e.Q6J("formGroup",n.formSettings))},dependencies:[s._Y,s.Fj,s.JJ,s.JL,s.sg,s.u,l.Hq,E.o,u.Ql,t.Nv]}),_})()},635:(R,I,r)=>{r.d(I,{g:()=>t});var c=r(3905),s=r(9019),e=r(7587),T=r(520);let t=(()=>{class l{constructor(u){this.http=u,this.baseURL=s.N.url_server_base}saveSettings(u){return(0,c.z)(this.http.post(this.baseURL+"settings/create",u))}updateSettins(u){return(0,c.z)(this.http.put(this.baseURL+"settings/1/update",u))}getSettings(){return(0,c.z)(this.http.get(this.baseURL+"settings"))}findSelectedFields(u,f){return(0,c.z)(this.http.post(`${this.baseURL}settings/findSelectedFields`,{id:u,searchingFields:f}))}}return l.\u0275fac=function(u){return new(u||l)(e.LFG(T.eN))},l.\u0275prov=e.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"}),l})()},3905:(R,I,r)=>{r.d(I,{z:()=>e});var c=r(6805),s=r(930);function e(T,t){const l="object"==typeof t;return new Promise((E,u)=>{const f=new s.Hp({next:_=>{E(_),f.unsubscribe()},error:u,complete:()=>{l?E(t.defaultValue):u(new c.K)}});T.subscribe(f)})}}}]);